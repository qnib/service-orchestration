version: '3'
services:
  broker:
    # 0.10.2.1
    image: qnib/plain-kafka@sha256:192b2acdce269b31e894c86ec7fd88a1e7e701cd5ac5d55cd20bcea6c885b332
    hostname: "{{.Service.Name}}.{{.Task.Slot}}.{{.Task.ID}}"
    networks:
      - kafka_default
    ports:
      - "9092:9092"
    environment:
      SWARM_TASK_ID: '{{.Task.Slot}}'

networks:
  kafka_default:
    external: true
